# Demo Data Seeding Guide

## Overview

`seed_demo_data.py` is a specialized script for seeding Flow Companion with presentation-ready demo data that showcases the complete 5-tier memory system.

## What Gets Seeded

### 1. **Projects (3)**
- **Project Alpha** - Active infrastructure modernization project
- **Q3 Fintech GTM** - Completed go-to-market project
- **AI Developer Outreach** - Completed developer engagement campaign

### 2. **Tasks (7)**
All tasks associated with Project Alpha:
- 2 completed tasks (high/medium priority)
- 1 in-progress task (high priority)
- 4 todo tasks (various priorities)

### 3. **Procedural Memory (2)**

#### GTM Roadmap Template ‚≠ê KEY FOR PRESENTATION FINALE
- **Type**: Template
- **Trigger**: `create_gtm_project`
- **Phases**: Research ‚Üí Strategy ‚Üí Execution
- **Total Tasks**: 12 pre-defined tasks across 3 phases
- **Usage**: 3 times (proven pattern)
- **Purpose**: Demonstrates learned workflow automation

#### Market Research Questions
- **Type**: Checklist
- **Trigger**: `market_research`
- **Questions**: 6 standard due diligence questions
- **Purpose**: Demonstrates knowledge capture

### 4. **Semantic Memory (4)**
User preferences learned from past behavior:
- `default_priority` = "high" (confidence: 0.8, 15 uses)
- `communication_style` = "concise" (confidence: 0.9, 25 uses)
- `focus_area` = "AI and developer tools" (confidence: 0.85, 12 uses)
- `work_style` = "strategic planning" (confidence: 0.75, 8 uses)

### 5. **Episodic Memory (3)**
Past actions showing learning over time:
- Created "Q3 Fintech GTM" project using GTM Template (90 days ago)
- Completed "Q3 Fintech GTM" project successfully (45 days ago)
- Applied GTM Template to "AI Developer Outreach" (120 days ago)

## Usage

### Basic Seeding

```bash
# Activate virtual environment
source venv/bin/activate

# Seed all demo data (with embeddings for vector search)
python scripts/seed_demo_data.py
```

**Important**: Embeddings are generated by default using Voyage AI (1024-dimensional vectors). This enables semantic search queries like:
- "find template for go-to-market" ‚Üí matches GTM Roadmap Template
- "what GTM projects have I done?" ‚Üí finds past GTM actions

### Clean and Reseed

```bash
# Clear existing demo data and reseed
python scripts/seed_demo_data.py --clean
```

### Verify Data

```bash
# Check if demo data exists
python scripts/seed_demo_data.py --verify
```

### Fast Seeding (Skip Embeddings)

```bash
# Seed without generating embeddings (faster, but semantic search won't work)
python scripts/seed_demo_data.py --skip-embeddings
```

## Embedding Generation

The script automatically generates 1024-dimensional embeddings (Voyage AI) for documents that support vector search:

### Procedural Memory (Templates & Checklists)
**Embedded text**: `{name} {description} {trigger}`

Example:
```
"GTM Roadmap Template Standard go-to-market project template with research-backed task generation create_gtm_project"
```

This enables queries like:
- "find template for go-to-market" ‚Üí ‚úì Matches GTM Roadmap Template
- "show me project templates" ‚Üí ‚úì Finds all templates
- "what checklists do I have?" ‚Üí ‚úì Finds Market Research Questions

### Episodic Memory (Past Actions)
**Embedded text**: Natural language summary of action + entity + metadata

Example:
```
"created project project Q3 Fintech GTM using GTM Roadmap Template with 12 tasks template-based"
```

This enables queries like:
- "what GTM projects have I done?" ‚Üí ‚úì Finds Q3 Fintech GTM and AI Developer Outreach
- "show me template-based projects" ‚Üí ‚úì Finds projects created from templates
- "what projects did I complete successfully?" ‚Üí ‚úì Finds completed project actions

### Semantic Memory (Preferences)
**No embeddings** - Preferences use exact key-value lookups, not semantic search.

### Verification
Each embedding is verified to be 1024 dimensions. Warnings are printed if dimension mismatches occur.

## Idempotency

The script is **idempotent** - safe to run multiple times:
- Checks for existing data before inserting
- Only inserts new records
- Skips duplicates based on unique identifiers:
  - Projects: by `name`
  - Tasks: by `title`
  - Procedural: by `name`
  - Semantic: by `key`
  - Episodic: by `(action_type, timestamp)`

## Output Example

```
============================================================
Flow Companion - Demo Data Seeder
============================================================

Demo User ID: demo-user

============================================================
SEEDING PROJECTS
============================================================

  ‚úì Inserted: Project Alpha (active)
  ‚úì Inserted: Q3 Fintech GTM (completed)
  ‚úì Inserted: AI Developer Outreach (completed)

üìä Summary: 3 new projects, 0 existing

============================================================
SEEDING TASKS
============================================================

  ‚úì Inserted: Review infrastructure audit report (done, high)
  ‚úì Inserted: Schedule stakeholder alignment meeting (done, medium)
  ‚úì Inserted: Draft migration timeline (in_progress, high)
  ‚úì Inserted: Identify vendor dependencies (todo, medium)
  ‚úì Inserted: Cost-benefit analysis (todo, high)
  ‚úì Inserted: Security compliance review (todo, high)
  ‚úì Inserted: Draft communication plan (todo, low)

üìä Summary: 7 new tasks, 0 existing

============================================================
SEEDING PROCEDURAL MEMORY
============================================================

  üìä Generated embedding for: GTM Roadmap Template (1024-dim)
  ‚úì Inserted: GTM Roadmap Template (template, used 3x)
  üìä Generated embedding for: Market Research Questions (1024-dim)
  ‚úì Inserted: Market Research Questions (checklist, used 2x)

üìä Summary: 2 new procedures, 0 existing

============================================================
SEEDING SEMANTIC MEMORY
============================================================

  ‚úì Inserted: default_priority = high (confidence: 0.8, used 15x)
  ‚úì Inserted: communication_style = concise (confidence: 0.9, used 25x)
  ‚úì Inserted: focus_area = AI and developer tools (confidence: 0.85, used 12x)
  ‚úì Inserted: work_style = strategic planning (confidence: 0.75, used 8x)

üìä Summary: 4 new preferences, 0 existing

============================================================
SEEDING EPISODIC MEMORY
============================================================

  üìä Generated embedding for: created_project (1024-dim)
  ‚úì Inserted: created_project - Q3 Fintech GTM (success)
  üìä Generated embedding for: completed_project (1024-dim)
  ‚úì Inserted: completed_project - Q3 Fintech GTM (success)
  üìä Generated embedding for: template_applied (1024-dim)
  ‚úì Inserted: template_applied - AI Developer Outreach (success)

üìä Summary: 3 new actions, 0 existing

============================================================
‚úÖ DEMO DATA SEEDING COMPLETE
============================================================

üìä Summary:
  Projects inserted: 3
  Tasks inserted: 7
  Procedural memories inserted: 2
  Semantic memories inserted: 4
  Episodic memories inserted: 3

üîç Vector Search Enabled:
  Procedural memories with embeddings: 2
  Episodic memories with embeddings: 3
  Embedding dimension: 1024 (Voyage AI)

  ‚úì Semantic search queries will work:
    ‚Ä¢ 'find template for go-to-market' ‚Üí GTM Roadmap Template
    ‚Ä¢ 'what GTM projects have I done?' ‚Üí Past GTM actions

‚ú® Demo data ready for presentation!
   User ID: demo-user

üí° Next steps:
   1. Launch UI: streamlit run ui/streamlit_app.py
   2. Select user: demo-user
   3. Demo the 5-tier memory system!

============================================================
```

## Presentation Flow

### Setup Before Presentation

```bash
# 1. Clear any existing data
python scripts/seed_demo_data.py --clean

# 2. Verify everything is loaded
python scripts/seed_demo_data.py --verify
```

### Demo Script Integration

This data supports the following demo flow:

1. **Show existing projects** ‚Üí Project Alpha (active work)
2. **Show tasks** ‚Üí 7 tasks in various states
3. **Show preferences** ‚Üí AI focus, concise style, high priority default
4. **Show procedural memory** ‚Üí GTM Template learned from past projects
5. **FINALE: Create new GTM project** ‚Üí
   - User: "Create a new GTM project for the healthcare vertical"
   - Agent recognizes pattern, applies GTM Template
   - Generates 12 tasks across 3 phases automatically
   - Shows learning from past successful projects (Q3 Fintech GTM, AI Developer Outreach)

## Demo User ID

All seeded data uses the user ID: **`demo-user`**

Make sure to select this user in the Streamlit UI when running the demo.

## Troubleshooting

### ModuleNotFoundError: No module named 'bson'

**Solution**: Activate the virtual environment first:
```bash
source venv/bin/activate
```

### No projects found (after seeding)

**Solution**: Make sure you're selecting the correct user (`demo-user`) in the UI.

### Embeddings failing

**Solution**: Check that `VOYAGE_API_KEY` is set in `.env`, or use `--skip-embeddings` for testing.

### Need to start fresh

**Solution**: Use the `--clean` flag to clear all demo data:
```bash
python scripts/seed_demo_data.py --clean
```

## Data Schema Reference

### Projects
```javascript
{
  name: "Project Alpha",
  description: "Q4 infrastructure modernization initiative",
  status: "active",  // or "completed"
  created_at: ISODate,
  completed_at: ISODate,  // only for completed
  user_id: "demo-user",
  tags: ["infrastructure", "modernization"],
  priority: "high"
}
```

### Tasks
```javascript
{
  title: "Review infrastructure audit report",
  project: "Project Alpha",
  project_id: ObjectId,
  status: "done",  // or "in_progress", "todo"
  priority: "high",
  created_at: ISODate,
  completed_at: ISODate,  // only if done
  started_at: ISODate,     // only if in_progress
  user_id: "demo-user",
  description: "Analyze findings from Q3 infrastructure audit",
  tags: ["audit", "review"]
}
```

### Procedural Memory (Template)
```javascript
{
  user_id: "demo-user",
  memory_type: "procedural",
  rule_type: "template",
  name: "GTM Roadmap Template",
  description: "Standard go-to-market project template...",
  trigger: "create_gtm_project",
  template: {
    phases: [
      {
        name: "Research",
        tasks: ["Market size analysis", ...]
      }
    ]
  },
  times_used: 3,
  success_rate: 1.0,
  embedding: [...],  // 1024-dim vector
  created_at: ISODate,
  last_used: ISODate
}
```

### Semantic Memory (Preference)
```javascript
{
  user_id: "demo-user",
  memory_type: "semantic",
  semantic_type: "preference",
  key: "default_priority",
  value: "high",
  source: "inferred",  // or "explicit"
  confidence: 0.8,
  times_used: 15,
  created_at: ISODate,
  updated_at: ISODate
}
```

### Episodic Memory (Action)
```javascript
{
  user_id: "demo-user",
  session_id: "past-session-1",
  memory_type: "episodic",
  action_type: "created_project",
  entity_type: "project",
  entity: {
    project_name: "Q3 Fintech GTM",
    used_template: "GTM Roadmap Template",
    tasks_generated: 12
  },
  metadata: {
    template_used: true,
    phases_created: ["Research", "Strategy", "Execution"]
  },
  outcome: "success",
  source_agent: "coordinator",
  embedding: [...],  // 1024-dim vector
  timestamp: ISODate,
  created_at: ISODate
}
```

## Related Scripts

- **`load_sample_data.py`** - Loads 10 projects with various tasks (broader dataset)
- **`seed_memory_demo_data.py`** - Seeds memory data from existing projects/tasks
- **`seed_demo_data.py`** - This script (complete presentation-ready dataset)

## Notes

- The GTM Template is the **key element** for the presentation finale
- All timestamps are realistic (30-120 days in the past) to show learning over time
- Embeddings are generated for procedural templates and episodic actions (enables semantic search)
- Preferences show varying confidence levels based on usage frequency
- Tasks are distributed across statuses to show active work (not just completed projects)
